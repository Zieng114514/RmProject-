ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"bsp_pwm.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "bsp/pwm/bsp_pwm.c"
  20              		.section	.text.PWMSelectTclk,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	PWMSelectTclk:
  27              	.LVL0:
  28              	.LFB242:
   1:bsp/pwm/bsp_pwm.c **** #include "bsp_pwm.h"
   2:bsp/pwm/bsp_pwm.c **** #include "stdlib.h"
   3:bsp/pwm/bsp_pwm.c **** #include "memory.h"
   4:bsp/pwm/bsp_pwm.c **** 
   5:bsp/pwm/bsp_pwm.c **** // 配合中断以及初始化
   6:bsp/pwm/bsp_pwm.c **** static uint8_t idx;
   7:bsp/pwm/bsp_pwm.c **** static PWMInstance *pwm_instance[PWM_DEVICE_CNT] = {NULL}; // 所有的pwm instance保存于此,用
   8:bsp/pwm/bsp_pwm.c **** static uint32_t PWMSelectTclk(TIM_HandleTypeDef *htim );
   9:bsp/pwm/bsp_pwm.c **** /**
  10:bsp/pwm/bsp_pwm.c ****  * @brief pwm dma传输完成回调函数
  11:bsp/pwm/bsp_pwm.c ****  *
  12:bsp/pwm/bsp_pwm.c ****  * @param htim 发生中断的定时器句柄
  13:bsp/pwm/bsp_pwm.c ****  */
  14:bsp/pwm/bsp_pwm.c **** void HAL_TIM_PWM_PulseFinishedCallback(TIM_HandleTypeDef *htim)
  15:bsp/pwm/bsp_pwm.c **** {
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
  17:bsp/pwm/bsp_pwm.c ****     { // 来自同一个定时器的中断且通道相同
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
  19:bsp/pwm/bsp_pwm.c ****         {
  20:bsp/pwm/bsp_pwm.c ****             if (pwm_instance[i]->callback) // 如果有回调函数
  21:bsp/pwm/bsp_pwm.c ****                 pwm_instance[i]->callback(pwm_instance[i]);
  22:bsp/pwm/bsp_pwm.c ****             return; // 一次只能有一个通道的中断,所以直接返回
  23:bsp/pwm/bsp_pwm.c ****         }
  24:bsp/pwm/bsp_pwm.c ****     }
  25:bsp/pwm/bsp_pwm.c **** }
  26:bsp/pwm/bsp_pwm.c **** 
  27:bsp/pwm/bsp_pwm.c **** PWMInstance *PWMRegister(PWM_Init_Config_s *config)
  28:bsp/pwm/bsp_pwm.c **** {
  29:bsp/pwm/bsp_pwm.c ****     if (idx >= PWM_DEVICE_CNT) // 超过最大实例数,考虑增加或查看是否有内存泄漏
  30:bsp/pwm/bsp_pwm.c ****         while (1)
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 2


  31:bsp/pwm/bsp_pwm.c ****             ;
  32:bsp/pwm/bsp_pwm.c ****     PWMInstance *pwm = (PWMInstance *)malloc(sizeof(PWMInstance));
  33:bsp/pwm/bsp_pwm.c ****     memset(pwm, 0, sizeof(PWMInstance));
  34:bsp/pwm/bsp_pwm.c **** 
  35:bsp/pwm/bsp_pwm.c ****     pwm->htim = config->htim;
  36:bsp/pwm/bsp_pwm.c ****     pwm->channel = config->channel;
  37:bsp/pwm/bsp_pwm.c ****     pwm->period = config->period;
  38:bsp/pwm/bsp_pwm.c ****     pwm->dutyratio = config->dutyratio;
  39:bsp/pwm/bsp_pwm.c ****     pwm->callback = config->callback;
  40:bsp/pwm/bsp_pwm.c ****     pwm->id = config->id;
  41:bsp/pwm/bsp_pwm.c ****     pwm->tclk = PWMSelectTclk(pwm->htim);
  42:bsp/pwm/bsp_pwm.c ****     // 启动PWM
  43:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start(pwm->htim, pwm->channel);
  44:bsp/pwm/bsp_pwm.c ****     PWMSetPeriod(pwm, pwm->period);
  45:bsp/pwm/bsp_pwm.c ****     PWMSetDutyRatio(pwm, pwm->dutyratio);
  46:bsp/pwm/bsp_pwm.c ****     pwm_instance[idx++] = pwm;
  47:bsp/pwm/bsp_pwm.c ****     return pwm;
  48:bsp/pwm/bsp_pwm.c **** }
  49:bsp/pwm/bsp_pwm.c **** 
  50:bsp/pwm/bsp_pwm.c **** /* 只是对HAL的函数进行了形式上的封装 */
  51:bsp/pwm/bsp_pwm.c **** void PWMStart(PWMInstance *pwm)
  52:bsp/pwm/bsp_pwm.c **** {
  53:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start(pwm->htim, pwm->channel);
  54:bsp/pwm/bsp_pwm.c **** }
  55:bsp/pwm/bsp_pwm.c **** 
  56:bsp/pwm/bsp_pwm.c **** /* 只是对HAL的函数进行了形式上的封装 */
  57:bsp/pwm/bsp_pwm.c **** void PWMStop(PWMInstance *pwm)
  58:bsp/pwm/bsp_pwm.c **** {
  59:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Stop(pwm->htim, pwm->channel);
  60:bsp/pwm/bsp_pwm.c **** }
  61:bsp/pwm/bsp_pwm.c **** 
  62:bsp/pwm/bsp_pwm.c **** /*
  63:bsp/pwm/bsp_pwm.c ****  * @brief 设置pwm周期
  64:bsp/pwm/bsp_pwm.c ****  *
  65:bsp/pwm/bsp_pwm.c ****  * @param pwm pwm实例
  66:bsp/pwm/bsp_pwm.c ****  * @param period 周期 单位 s
  67:bsp/pwm/bsp_pwm.c ****  */
  68:bsp/pwm/bsp_pwm.c **** void PWMSetPeriod(PWMInstance *pwm, float period)
  69:bsp/pwm/bsp_pwm.c **** {
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
  71:bsp/pwm/bsp_pwm.c **** }
  72:bsp/pwm/bsp_pwm.c **** /*
  73:bsp/pwm/bsp_pwm.c ****     * @brief 设置pwm占空比
  74:bsp/pwm/bsp_pwm.c ****     *
  75:bsp/pwm/bsp_pwm.c ****     * @param pwm pwm实例
  76:bsp/pwm/bsp_pwm.c ****     * @param dutyratio 占空比 0~1
  77:bsp/pwm/bsp_pwm.c **** */
  78:bsp/pwm/bsp_pwm.c **** void PWMSetDutyRatio(PWMInstance *pwm, float dutyratio)
  79:bsp/pwm/bsp_pwm.c **** {
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
  81:bsp/pwm/bsp_pwm.c **** }
  82:bsp/pwm/bsp_pwm.c **** 
  83:bsp/pwm/bsp_pwm.c **** /* 只是对HAL的函数进行了形式上的封装 */
  84:bsp/pwm/bsp_pwm.c **** void PWMStartDMA(PWMInstance *pwm, uint32_t *pData, uint32_t Size)
  85:bsp/pwm/bsp_pwm.c **** {
  86:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start_DMA(pwm->htim, pwm->channel, pData, Size);
  87:bsp/pwm/bsp_pwm.c **** }
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 3


  88:bsp/pwm/bsp_pwm.c **** 
  89:bsp/pwm/bsp_pwm.c **** // 设置pwm对应定时器时钟源频率
  90:bsp/pwm/bsp_pwm.c **** //tim2~7,12~14:APB1  tim1,8~11:APB2
  91:bsp/pwm/bsp_pwm.c **** static uint32_t PWMSelectTclk(TIM_HandleTypeDef *htim )
  92:bsp/pwm/bsp_pwm.c **** {
  29              		.loc 1 92 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 92 1 is_stmt 0 view .LVU1
  34 0000 08B5     		push	{r3, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 3, -8
  38              		.cfi_offset 14, -4
  93:bsp/pwm/bsp_pwm.c ****     uintptr_t tclk_temp  = ((uintptr_t)((htim)->Instance));
  39              		.loc 1 93 5 is_stmt 1 view .LVU2
  40              		.loc 1 93 47 is_stmt 0 view .LVU3
  41 0002 0368     		ldr	r3, [r0]
  42              	.LVL1:
  94:bsp/pwm/bsp_pwm.c ****     if (
  43              		.loc 1 94 5 is_stmt 1 view .LVU4
  95:bsp/pwm/bsp_pwm.c ****             (tclk_temp <= (APB1PERIPH_BASE + 0x2000UL)) &&
  44              		.loc 1 95 57 is_stmt 0 view .LVU5
  45 0004 03F14042 		add	r2, r3, #-1073741824
  94:bsp/pwm/bsp_pwm.c ****     if (
  46              		.loc 1 94 8 view .LVU6
  47 0008 B2F5005F 		cmp	r2, #8192
  48 000c 0FD9     		bls	.L11
  96:bsp/pwm/bsp_pwm.c ****             (tclk_temp >= (APB1PERIPH_BASE + 0x0000UL)))
  97:bsp/pwm/bsp_pwm.c ****     {
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  99:bsp/pwm/bsp_pwm.c ****     }
 100:bsp/pwm/bsp_pwm.c ****     else if (
  49              		.loc 1 100 10 is_stmt 1 view .LVU7
 101:bsp/pwm/bsp_pwm.c ****             ((tclk_temp <= (APB2PERIPH_BASE + 0x0400UL)) &&
  50              		.loc 1 101 58 is_stmt 0 view .LVU8
  51 000e 03F13F42 		add	r2, r3, #-1090519040
  52 0012 02F57F02 		add	r2, r2, #16711680
 100:bsp/pwm/bsp_pwm.c ****             ((tclk_temp <= (APB2PERIPH_BASE + 0x0400UL)) &&
  53              		.loc 1 100 13 view .LVU9
  54 0016 B2F5806F 		cmp	r2, #1024
  55 001a 17D9     		bls	.L5
 102:bsp/pwm/bsp_pwm.c ****              (tclk_temp >= (APB2PERIPH_BASE + 0x0000UL))) ||
 103:bsp/pwm/bsp_pwm.c ****             ((tclk_temp <= (APB2PERIPH_BASE + 0x4800UL)) &&
  56              		.loc 1 103 58 view .LVU10
  57 001c A3F14023 		sub	r3, r3, #1073758208
  58              	.LVL2:
  59              		.loc 1 103 58 view .LVU11
  60 0020 A3F58033 		sub	r3, r3, #65536
 102:bsp/pwm/bsp_pwm.c ****              (tclk_temp >= (APB2PERIPH_BASE + 0x0000UL))) ||
  61              		.loc 1 102 59 view .LVU12
  62 0024 B3F5006F 		cmp	r3, #2048
  63 0028 10D9     		bls	.L5
 104:bsp/pwm/bsp_pwm.c ****              (tclk_temp >= (APB2PERIPH_BASE + 0x4000UL))))
 105:bsp/pwm/bsp_pwm.c ****     {
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 4


 107:bsp/pwm/bsp_pwm.c ****     }
 108:bsp/pwm/bsp_pwm.c ****     return 0;
  64              		.loc 1 108 12 view .LVU13
  65 002a 0020     		movs	r0, #0
  66              	.LVL3:
  67              	.L1:
 109:bsp/pwm/bsp_pwm.c **** }...
  68              		.loc 1 109 1 view .LVU14
  69 002c 08BD     		pop	{r3, pc}
  70              	.LVL4:
  71              	.L11:
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  72              		.loc 1 98 9 is_stmt 1 view .LVU15
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  73              		.loc 1 98 17 is_stmt 0 view .LVU16
  74 002e FFF7FEFF 		bl	HAL_RCC_GetPCLK1Freq
  75              	.LVL5:
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  76              		.loc 1 98 61 discriminator 1 view .LVU17
  77 0032 0E4B     		ldr	r3, .L12
  78 0034 9B68     		ldr	r3, [r3, #8]
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  79              		.loc 1 98 85 discriminator 1 view .LVU18
  80 0036 C3F38223 		ubfx	r3, r3, #10, #3
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  81              		.loc 1 98 56 discriminator 1 view .LVU19
  82 003a 0D4A     		ldr	r2, .L12+4
  83 003c D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  84              		.loc 1 98 117 discriminator 1 view .LVU20
  85 003e 1BB9     		cbnz	r3, .L7
  86 0040 0123     		movs	r3, #1
  87              	.L3:
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  88              		.loc 1 98 40 discriminator 4 view .LVU21
  89 0042 03FB00F0 		mul	r0, r3, r0
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  90              		.loc 1 98 40 view .LVU22
  91 0046 F1E7     		b	.L1
  92              	.L7:
  98:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK1Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  93              		.loc 1 98 117 discriminator 2 view .LVU23
  94 0048 0223     		movs	r3, #2
  95 004a FAE7     		b	.L3
  96              	.LVL6:
  97              	.L5:
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  98              		.loc 1 106 9 is_stmt 1 view .LVU24
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
  99              		.loc 1 106 17 is_stmt 0 view .LVU25
 100 004c FFF7FEFF 		bl	HAL_RCC_GetPCLK2Freq
 101              	.LVL7:
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 102              		.loc 1 106 61 discriminator 1 view .LVU26
 103 0050 064B     		ldr	r3, .L12
 104 0052 9B68     		ldr	r3, [r3, #8]
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 5


 105              		.loc 1 106 85 discriminator 1 view .LVU27
 106 0054 C3F38223 		ubfx	r3, r3, #10, #3
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 107              		.loc 1 106 56 discriminator 1 view .LVU28
 108 0058 054A     		ldr	r2, .L12+4
 109 005a D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 110              		.loc 1 106 117 discriminator 1 view .LVU29
 111 005c 1BB9     		cbnz	r3, .L9
 112 005e 0123     		movs	r3, #1
 113              	.L6:
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 114              		.loc 1 106 40 discriminator 4 view .LVU30
 115 0060 03FB00F0 		mul	r0, r3, r0
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 116              		.loc 1 106 40 view .LVU31
 117 0064 E2E7     		b	.L1
 118              	.L9:
 106:bsp/pwm/bsp_pwm.c ****         return (HAL_RCC_GetPCLK2Freq() * (APBPrescTable[(RCC->CFGR & RCC_CFGR_PPRE1)>> RCC_CFGR_PPR
 119              		.loc 1 106 117 discriminator 2 view .LVU32
 120 0066 0223     		movs	r3, #2
 121 0068 FAE7     		b	.L6
 122              	.L13:
 123 006a 00BF     		.align	2
 124              	.L12:
 125 006c 00380240 		.word	1073887232
 126 0070 00000000 		.word	APBPrescTable
 127              		.cfi_endproc
 128              	.LFE242:
 130              		.section	.text.HAL_TIM_PWM_PulseFinishedCallback,"ax",%progbits
 131              		.align	1
 132              		.global	HAL_TIM_PWM_PulseFinishedCallback
 133              		.syntax unified
 134              		.thumb
 135              		.thumb_func
 137              	HAL_TIM_PWM_PulseFinishedCallback:
 138              	.LVL8:
 139              	.LFB235:
  15:bsp/pwm/bsp_pwm.c **** {
 140              		.loc 1 15 1 is_stmt 1 view -0
 141              		.cfi_startproc
 142              		@ args = 0, pretend = 0, frame = 0
 143              		@ frame_needed = 0, uses_anonymous_args = 0
  15:bsp/pwm/bsp_pwm.c **** {
 144              		.loc 1 15 1 is_stmt 0 view .LVU34
 145 0000 08B5     		push	{r3, lr}
 146              	.LCFI1:
 147              		.cfi_def_cfa_offset 8
 148              		.cfi_offset 3, -8
 149              		.cfi_offset 14, -4
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 150              		.loc 1 16 5 is_stmt 1 view .LVU35
 151              	.LBB2:
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 152              		.loc 1 16 10 view .LVU36
 153              	.LVL9:
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 6


 154              		.loc 1 16 18 is_stmt 0 view .LVU37
 155 0002 0023     		movs	r3, #0
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 156              		.loc 1 16 5 view .LVU38
 157 0004 01E0     		b	.L15
 158              	.LVL10:
 159              	.L16:
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 160              		.loc 1 16 35 is_stmt 1 discriminator 2 view .LVU39
 161 0006 0133     		adds	r3, r3, #1
 162              	.LVL11:
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 163              		.loc 1 16 35 is_stmt 0 discriminator 2 view .LVU40
 164 0008 DBB2     		uxtb	r3, r3
 165              	.LVL12:
 166              	.L15:
  16:bsp/pwm/bsp_pwm.c ****     for (uint8_t i = 0; i < idx; i++)
 167              		.loc 1 16 27 is_stmt 1 discriminator 1 view .LVU41
 168 000a 0C4A     		ldr	r2, .L21
 169 000c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 170 000e 9A42     		cmp	r2, r3
 171 0010 13D9     		bls	.L14
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 172              		.loc 1 18 9 view .LVU42
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 173              		.loc 1 18 25 is_stmt 0 view .LVU43
 174 0012 0B4A     		ldr	r2, .L21+4
 175 0014 52F82320 		ldr	r2, [r2, r3, lsl #2]
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 176              		.loc 1 18 28 view .LVU44
 177 0018 1168     		ldr	r1, [r2]
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 178              		.loc 1 18 12 view .LVU45
 179 001a 8142     		cmp	r1, r0
 180 001c F3D1     		bne	.L16
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 181              		.loc 1 18 50 discriminator 1 view .LVU46
 182 001e 90F81CE0 		ldrb	lr, [r0, #28]	@ zero_extendqisi2
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 183              		.loc 1 18 83 discriminator 1 view .LVU47
 184 0022 5168     		ldr	r1, [r2, #4]
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 185              		.loc 1 18 92 discriminator 1 view .LVU48
 186 0024 4FEA910C 		lsr	ip, r1, #2
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 187              		.loc 1 18 65 discriminator 1 view .LVU49
 188 0028 0121     		movs	r1, #1
 189 002a 01FA0CF1 		lsl	r1, r1, ip
  18:bsp/pwm/bsp_pwm.c ****         if (pwm_instance[i]->htim == htim && htim->Channel == (1<<(pwm_instance[i]->channel/4)))
 190              		.loc 1 18 43 discriminator 1 view .LVU50
 191 002e 8E45     		cmp	lr, r1
 192 0030 E9D1     		bne	.L16
  20:bsp/pwm/bsp_pwm.c ****             if (pwm_instance[i]->callback) // 如果有回调函数
 193              		.loc 1 20 13 is_stmt 1 view .LVU51
  20:bsp/pwm/bsp_pwm.c ****             if (pwm_instance[i]->callback) // 如果有回调函数
 194              		.loc 1 20 32 is_stmt 0 view .LVU52
 195 0032 5369     		ldr	r3, [r2, #20]
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 7


 196              	.LVL13:
  20:bsp/pwm/bsp_pwm.c ****             if (pwm_instance[i]->callback) // 如果有回调函数
 197              		.loc 1 20 16 view .LVU53
 198 0034 0BB1     		cbz	r3, .L14
  21:bsp/pwm/bsp_pwm.c ****                 pwm_instance[i]->callback(pwm_instance[i]);
 199              		.loc 1 21 17 is_stmt 1 view .LVU54
 200 0036 1046     		mov	r0, r2
 201              	.LVL14:
  21:bsp/pwm/bsp_pwm.c ****                 pwm_instance[i]->callback(pwm_instance[i]);
 202              		.loc 1 21 17 is_stmt 0 view .LVU55
 203 0038 9847     		blx	r3
 204              	.LVL15:
  22:bsp/pwm/bsp_pwm.c ****             return; // 一次只能有一个通道的中断,所以直接返回
 205              		.loc 1 22 13 is_stmt 1 view .LVU56
 206              	.L14:
  22:bsp/pwm/bsp_pwm.c ****             return; // 一次只能有一个通道的中断,所以直接返回
 207              		.loc 1 22 13 is_stmt 0 view .LVU57
 208              	.LBE2:
  25:bsp/pwm/bsp_pwm.c **** }
 209              		.loc 1 25 1 view .LVU58
 210 003a 08BD     		pop	{r3, pc}
 211              	.L22:
 212              		.align	2
 213              	.L21:
 214 003c 00000000 		.word	idx
 215 0040 00000000 		.word	pwm_instance
 216              		.cfi_endproc
 217              	.LFE235:
 219              		.section	.text.PWMStart,"ax",%progbits
 220              		.align	1
 221              		.global	PWMStart
 222              		.syntax unified
 223              		.thumb
 224              		.thumb_func
 226              	PWMStart:
 227              	.LVL16:
 228              	.LFB237:
  52:bsp/pwm/bsp_pwm.c **** {
 229              		.loc 1 52 1 is_stmt 1 view -0
 230              		.cfi_startproc
 231              		@ args = 0, pretend = 0, frame = 0
 232              		@ frame_needed = 0, uses_anonymous_args = 0
  52:bsp/pwm/bsp_pwm.c **** {
 233              		.loc 1 52 1 is_stmt 0 view .LVU60
 234 0000 08B5     		push	{r3, lr}
 235              	.LCFI2:
 236              		.cfi_def_cfa_offset 8
 237              		.cfi_offset 3, -8
 238              		.cfi_offset 14, -4
  53:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start(pwm->htim, pwm->channel);
 239              		.loc 1 53 5 is_stmt 1 view .LVU61
 240 0002 4168     		ldr	r1, [r0, #4]
 241 0004 0068     		ldr	r0, [r0]
 242              	.LVL17:
  53:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start(pwm->htim, pwm->channel);
 243              		.loc 1 53 5 is_stmt 0 view .LVU62
 244 0006 FFF7FEFF 		bl	HAL_TIM_PWM_Start
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 8


 245              	.LVL18:
  54:bsp/pwm/bsp_pwm.c **** }
 246              		.loc 1 54 1 view .LVU63
 247 000a 08BD     		pop	{r3, pc}
 248              		.cfi_endproc
 249              	.LFE237:
 251              		.section	.text.PWMStop,"ax",%progbits
 252              		.align	1
 253              		.global	PWMStop
 254              		.syntax unified
 255              		.thumb
 256              		.thumb_func
 258              	PWMStop:
 259              	.LVL19:
 260              	.LFB238:
  58:bsp/pwm/bsp_pwm.c **** {
 261              		.loc 1 58 1 is_stmt 1 view -0
 262              		.cfi_startproc
 263              		@ args = 0, pretend = 0, frame = 0
 264              		@ frame_needed = 0, uses_anonymous_args = 0
  58:bsp/pwm/bsp_pwm.c **** {
 265              		.loc 1 58 1 is_stmt 0 view .LVU65
 266 0000 08B5     		push	{r3, lr}
 267              	.LCFI3:
 268              		.cfi_def_cfa_offset 8
 269              		.cfi_offset 3, -8
 270              		.cfi_offset 14, -4
  59:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Stop(pwm->htim, pwm->channel);
 271              		.loc 1 59 5 is_stmt 1 view .LVU66
 272 0002 4168     		ldr	r1, [r0, #4]
 273 0004 0068     		ldr	r0, [r0]
 274              	.LVL20:
  59:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Stop(pwm->htim, pwm->channel);
 275              		.loc 1 59 5 is_stmt 0 view .LVU67
 276 0006 FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 277              	.LVL21:
  60:bsp/pwm/bsp_pwm.c **** }
 278              		.loc 1 60 1 view .LVU68
 279 000a 08BD     		pop	{r3, pc}
 280              		.cfi_endproc
 281              	.LFE238:
 283              		.section	.text.PWMSetPeriod,"ax",%progbits
 284              		.align	1
 285              		.global	PWMSetPeriod
 286              		.syntax unified
 287              		.thumb
 288              		.thumb_func
 290              	PWMSetPeriod:
 291              	.LVL22:
 292              	.LFB239:
  69:bsp/pwm/bsp_pwm.c **** {
 293              		.loc 1 69 1 is_stmt 1 view -0
 294              		.cfi_startproc
 295              		@ args = 0, pretend = 0, frame = 0
 296              		@ frame_needed = 0, uses_anonymous_args = 0
 297              		@ link register save eliminated.
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 9


 298              		.loc 1 70 5 view .LVU70
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
 299              		.loc 1 70 5 view .LVU71
 300 0000 8368     		ldr	r3, [r0, #8]
 301 0002 0168     		ldr	r1, [r0]
 302 0004 4A68     		ldr	r2, [r1, #4]
 303 0006 0132     		adds	r2, r2, #1
 304 0008 B3FBF2F3 		udiv	r3, r3, r2
 305 000c 07EE903A 		vmov	s15, r3	@ int
 306 0010 F8EE677A 		vcvt.f32.u32	s15, s15
 307 0014 67EE807A 		vmul.f32	s15, s15, s0
 308 0018 0B68     		ldr	r3, [r1]
 309 001a FCEEE77A 		vcvt.u32.f32	s15, s15
 310 001e C3ED0B7A 		vstr.32	s15, [r3, #44]	@ int
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
 311              		.loc 1 70 5 view .LVU72
 312 0022 8368     		ldr	r3, [r0, #8]
 313 0024 0168     		ldr	r1, [r0]
 314 0026 4A68     		ldr	r2, [r1, #4]
 315 0028 0132     		adds	r2, r2, #1
 316 002a B3FBF2F3 		udiv	r3, r3, r2
 317 002e 07EE903A 		vmov	s15, r3	@ int
 318 0032 F8EE677A 		vcvt.f32.u32	s15, s15
 319 0036 27EE800A 		vmul.f32	s0, s15, s0
 320              	.LVL23:
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
 321              		.loc 1 70 5 is_stmt 0 view .LVU73
 322 003a BCEEC00A 		vcvt.u32.f32	s0, s0
 323 003e 81ED030A 		vstr.32	s0, [r1, #12]	@ int
  70:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetAutoreload(pwm->htim, period*((pwm->tclk)/(pwm->htim->Init.Prescaler+1)));
 324              		.loc 1 70 5 is_stmt 1 view .LVU74
  71:bsp/pwm/bsp_pwm.c **** }
 325              		.loc 1 71 1 is_stmt 0 view .LVU75
 326 0042 7047     		bx	lr
 327              		.cfi_endproc
 328              	.LFE239:
 330              		.section	.text.PWMSetDutyRatio,"ax",%progbits
 331              		.align	1
 332              		.global	PWMSetDutyRatio
 333              		.syntax unified
 334              		.thumb
 335              		.thumb_func
 337              	PWMSetDutyRatio:
 338              	.LVL24:
 339              	.LFB240:
  79:bsp/pwm/bsp_pwm.c **** {
 340              		.loc 1 79 1 is_stmt 1 view -0
 341              		.cfi_startproc
 342              		@ args = 0, pretend = 0, frame = 0
 343              		@ frame_needed = 0, uses_anonymous_args = 0
 344              		@ link register save eliminated.
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 345              		.loc 1 80 5 view .LVU77
 346 0000 4368     		ldr	r3, [r0, #4]
 347 0002 63B9     		cbnz	r3, .L29
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 348              		.loc 1 80 5 is_stmt 0 discriminator 1 view .LVU78
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 10


 349 0004 0368     		ldr	r3, [r0]
 350 0006 1B68     		ldr	r3, [r3]
 351 0008 D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
 352 000c F8EE677A 		vcvt.f32.u32	s15, s15
 353 0010 27EE800A 		vmul.f32	s0, s15, s0
 354              	.LVL25:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 355              		.loc 1 80 5 discriminator 1 view .LVU79
 356 0014 BCEEC00A 		vcvt.u32.f32	s0, s0
 357 0018 83ED0D0A 		vstr.32	s0, [r3, #52]	@ int
 358 001c 7047     		bx	lr
 359              	.LVL26:
 360              	.L29:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 361              		.loc 1 80 5 discriminator 2 view .LVU80
 362 001e 042B     		cmp	r3, #4
 363 0020 0ED0     		beq	.L33
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 364              		.loc 1 80 5 discriminator 4 view .LVU81
 365 0022 082B     		cmp	r3, #8
 366 0024 19D0     		beq	.L34
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 367              		.loc 1 80 5 discriminator 7 view .LVU82
 368 0026 0368     		ldr	r3, [r0]
 369 0028 1B68     		ldr	r3, [r3]
 370 002a D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
 371 002e F8EE677A 		vcvt.f32.u32	s15, s15
 372 0032 67EE807A 		vmul.f32	s15, s15, s0
 373 0036 FCEEE77A 		vcvt.u32.f32	s15, s15
 374 003a C3ED107A 		vstr.32	s15, [r3, #64]	@ int
  81:bsp/pwm/bsp_pwm.c **** }
 375              		.loc 1 81 1 view .LVU83
 376 003e 7047     		bx	lr
 377              	.L33:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 378              		.loc 1 80 5 discriminator 3 view .LVU84
 379 0040 0368     		ldr	r3, [r0]
 380 0042 1B68     		ldr	r3, [r3]
 381 0044 D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
 382 0048 F8EE677A 		vcvt.f32.u32	s15, s15
 383 004c 67EE807A 		vmul.f32	s15, s15, s0
 384 0050 FCEEE77A 		vcvt.u32.f32	s15, s15
 385 0054 C3ED0E7A 		vstr.32	s15, [r3, #56]	@ int
 386 0058 7047     		bx	lr
 387              	.L34:
  80:bsp/pwm/bsp_pwm.c ****     __HAL_TIM_SetCompare(pwm->htim, pwm->channel, dutyratio * (pwm->htim->Instance->ARR));
 388              		.loc 1 80 5 discriminator 6 view .LVU85
 389 005a 0368     		ldr	r3, [r0]
 390 005c 1B68     		ldr	r3, [r3]
 391 005e D3ED0B7A 		vldr.32	s15, [r3, #44]	@ int
 392 0062 F8EE677A 		vcvt.f32.u32	s15, s15
 393 0066 67EE807A 		vmul.f32	s15, s15, s0
 394 006a FCEEE77A 		vcvt.u32.f32	s15, s15
 395 006e C3ED0F7A 		vstr.32	s15, [r3, #60]	@ int
 396 0072 7047     		bx	lr
 397              		.cfi_endproc
 398              	.LFE240:
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 11


 400              		.section	.text.PWMRegister,"ax",%progbits
 401              		.align	1
 402              		.global	PWMRegister
 403              		.syntax unified
 404              		.thumb
 405              		.thumb_func
 407              	PWMRegister:
 408              	.LVL27:
 409              	.LFB236:
  28:bsp/pwm/bsp_pwm.c **** {
 410              		.loc 1 28 1 is_stmt 1 view -0
 411              		.cfi_startproc
 412              		@ args = 0, pretend = 0, frame = 0
 413              		@ frame_needed = 0, uses_anonymous_args = 0
  28:bsp/pwm/bsp_pwm.c **** {
 414              		.loc 1 28 1 is_stmt 0 view .LVU87
 415 0000 38B5     		push	{r3, r4, r5, lr}
 416              	.LCFI4:
 417              		.cfi_def_cfa_offset 16
 418              		.cfi_offset 3, -16
 419              		.cfi_offset 4, -12
 420              		.cfi_offset 5, -8
 421              		.cfi_offset 14, -4
  29:bsp/pwm/bsp_pwm.c ****     if (idx >= PWM_DEVICE_CNT) // 超过最大实例数,考虑增加或查看是否有内存泄漏
 422              		.loc 1 29 5 is_stmt 1 view .LVU88
  29:bsp/pwm/bsp_pwm.c ****     if (idx >= PWM_DEVICE_CNT) // 超过最大实例数,考虑增加或查看是否有内存泄漏
 423              		.loc 1 29 13 is_stmt 0 view .LVU89
 424 0002 1C4B     		ldr	r3, .L39
 425 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  29:bsp/pwm/bsp_pwm.c ****     if (idx >= PWM_DEVICE_CNT) // 超过最大实例数,考虑增加或查看是否有内存泄漏
 426              		.loc 1 29 8 view .LVU90
 427 0006 0F2B     		cmp	r3, #15
 428 0008 00D9     		bls	.L36
 429              	.L37:
  30:bsp/pwm/bsp_pwm.c ****         while (1)
 430              		.loc 1 30 9 is_stmt 1 view .LVU91
  30:bsp/pwm/bsp_pwm.c ****         while (1)
 431              		.loc 1 30 15 view .LVU92
 432 000a FEE7     		b	.L37
 433              	.L36:
 434 000c 0546     		mov	r5, r0
  32:bsp/pwm/bsp_pwm.c ****     PWMInstance *pwm = (PWMInstance *)malloc(sizeof(PWMInstance));
 435              		.loc 1 32 5 view .LVU93
  32:bsp/pwm/bsp_pwm.c ****     PWMInstance *pwm = (PWMInstance *)malloc(sizeof(PWMInstance));
 436              		.loc 1 32 39 is_stmt 0 view .LVU94
 437 000e 1C20     		movs	r0, #28
 438              	.LVL28:
  32:bsp/pwm/bsp_pwm.c ****     PWMInstance *pwm = (PWMInstance *)malloc(sizeof(PWMInstance));
 439              		.loc 1 32 39 view .LVU95
 440 0010 FFF7FEFF 		bl	malloc
 441              	.LVL29:
 442 0014 0446     		mov	r4, r0
 443              	.LVL30:
  33:bsp/pwm/bsp_pwm.c ****     memset(pwm, 0, sizeof(PWMInstance));
 444              		.loc 1 33 5 is_stmt 1 view .LVU96
 445 0016 0023     		movs	r3, #0
 446 0018 0360     		str	r3, [r0]	@ unaligned
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 12


 447 001a 4360     		str	r3, [r0, #4]	@ unaligned
 448 001c 8360     		str	r3, [r0, #8]	@ unaligned
 449 001e C360     		str	r3, [r0, #12]	@ unaligned
 450 0020 0361     		str	r3, [r0, #16]	@ unaligned
 451 0022 4361     		str	r3, [r0, #20]	@ unaligned
 452 0024 8361     		str	r3, [r0, #24]	@ unaligned
  35:bsp/pwm/bsp_pwm.c ****     pwm->htim = config->htim;
 453              		.loc 1 35 5 view .LVU97
  35:bsp/pwm/bsp_pwm.c ****     pwm->htim = config->htim;
 454              		.loc 1 35 23 is_stmt 0 view .LVU98
 455 0026 2868     		ldr	r0, [r5]
 456              	.LVL31:
  35:bsp/pwm/bsp_pwm.c ****     pwm->htim = config->htim;
 457              		.loc 1 35 15 view .LVU99
 458 0028 2060     		str	r0, [r4]
  36:bsp/pwm/bsp_pwm.c ****     pwm->channel = config->channel;
 459              		.loc 1 36 5 is_stmt 1 view .LVU100
  36:bsp/pwm/bsp_pwm.c ****     pwm->channel = config->channel;
 460              		.loc 1 36 26 is_stmt 0 view .LVU101
 461 002a 6B68     		ldr	r3, [r5, #4]
  36:bsp/pwm/bsp_pwm.c ****     pwm->channel = config->channel;
 462              		.loc 1 36 18 view .LVU102
 463 002c 6360     		str	r3, [r4, #4]
  37:bsp/pwm/bsp_pwm.c ****     pwm->period = config->period;
 464              		.loc 1 37 5 is_stmt 1 view .LVU103
  37:bsp/pwm/bsp_pwm.c ****     pwm->period = config->period;
 465              		.loc 1 37 25 is_stmt 0 view .LVU104
 466 002e AB68     		ldr	r3, [r5, #8]	@ float
  37:bsp/pwm/bsp_pwm.c ****     pwm->period = config->period;
 467              		.loc 1 37 17 view .LVU105
 468 0030 E360     		str	r3, [r4, #12]	@ float
  38:bsp/pwm/bsp_pwm.c ****     pwm->dutyratio = config->dutyratio;
 469              		.loc 1 38 5 is_stmt 1 view .LVU106
  38:bsp/pwm/bsp_pwm.c ****     pwm->dutyratio = config->dutyratio;
 470              		.loc 1 38 28 is_stmt 0 view .LVU107
 471 0032 EB68     		ldr	r3, [r5, #12]	@ float
  38:bsp/pwm/bsp_pwm.c ****     pwm->dutyratio = config->dutyratio;
 472              		.loc 1 38 20 view .LVU108
 473 0034 2361     		str	r3, [r4, #16]	@ float
  39:bsp/pwm/bsp_pwm.c ****     pwm->callback = config->callback;
 474              		.loc 1 39 5 is_stmt 1 view .LVU109
  39:bsp/pwm/bsp_pwm.c ****     pwm->callback = config->callback;
 475              		.loc 1 39 27 is_stmt 0 view .LVU110
 476 0036 2B69     		ldr	r3, [r5, #16]
  39:bsp/pwm/bsp_pwm.c ****     pwm->callback = config->callback;
 477              		.loc 1 39 19 view .LVU111
 478 0038 6361     		str	r3, [r4, #20]
  40:bsp/pwm/bsp_pwm.c ****     pwm->id = config->id;
 479              		.loc 1 40 5 is_stmt 1 view .LVU112
  40:bsp/pwm/bsp_pwm.c ****     pwm->id = config->id;
 480              		.loc 1 40 21 is_stmt 0 view .LVU113
 481 003a 6B69     		ldr	r3, [r5, #20]
  40:bsp/pwm/bsp_pwm.c ****     pwm->id = config->id;
 482              		.loc 1 40 13 view .LVU114
 483 003c A361     		str	r3, [r4, #24]
  41:bsp/pwm/bsp_pwm.c ****     pwm->tclk = PWMSelectTclk(pwm->htim);
 484              		.loc 1 41 5 is_stmt 1 view .LVU115
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 13


  41:bsp/pwm/bsp_pwm.c ****     pwm->tclk = PWMSelectTclk(pwm->htim);
 485              		.loc 1 41 17 is_stmt 0 view .LVU116
 486 003e FFF7FEFF 		bl	PWMSelectTclk
 487              	.LVL32:
  41:bsp/pwm/bsp_pwm.c ****     pwm->tclk = PWMSelectTclk(pwm->htim);
 488              		.loc 1 41 15 discriminator 1 view .LVU117
 489 0042 A060     		str	r0, [r4, #8]
  43:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start(pwm->htim, pwm->channel);
 490              		.loc 1 43 5 is_stmt 1 view .LVU118
 491 0044 6168     		ldr	r1, [r4, #4]
 492 0046 2068     		ldr	r0, [r4]
 493 0048 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 494              	.LVL33:
  44:bsp/pwm/bsp_pwm.c ****     PWMSetPeriod(pwm, pwm->period);
 495              		.loc 1 44 5 view .LVU119
 496 004c 94ED030A 		vldr.32	s0, [r4, #12]
 497 0050 2046     		mov	r0, r4
 498 0052 FFF7FEFF 		bl	PWMSetPeriod
 499              	.LVL34:
  45:bsp/pwm/bsp_pwm.c ****     PWMSetDutyRatio(pwm, pwm->dutyratio);
 500              		.loc 1 45 5 view .LVU120
 501 0056 94ED040A 		vldr.32	s0, [r4, #16]
 502 005a 2046     		mov	r0, r4
 503 005c FFF7FEFF 		bl	PWMSetDutyRatio
 504              	.LVL35:
  46:bsp/pwm/bsp_pwm.c ****     pwm_instance[idx++] = pwm;
 505              		.loc 1 46 5 view .LVU121
  46:bsp/pwm/bsp_pwm.c ****     pwm_instance[idx++] = pwm;
 506              		.loc 1 46 21 is_stmt 0 view .LVU122
 507 0060 044A     		ldr	r2, .L39
 508 0062 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 509 0064 591C     		adds	r1, r3, #1
 510 0066 1170     		strb	r1, [r2]
  46:bsp/pwm/bsp_pwm.c ****     pwm_instance[idx++] = pwm;
 511              		.loc 1 46 25 view .LVU123
 512 0068 034A     		ldr	r2, .L39+4
 513 006a 42F82340 		str	r4, [r2, r3, lsl #2]
  47:bsp/pwm/bsp_pwm.c ****     return pwm;
 514              		.loc 1 47 5 is_stmt 1 view .LVU124
  48:bsp/pwm/bsp_pwm.c **** }
 515              		.loc 1 48 1 is_stmt 0 view .LVU125
 516 006e 2046     		mov	r0, r4
 517 0070 38BD     		pop	{r3, r4, r5, pc}
 518              	.LVL36:
 519              	.L40:
  48:bsp/pwm/bsp_pwm.c **** }
 520              		.loc 1 48 1 view .LVU126
 521 0072 00BF     		.align	2
 522              	.L39:
 523 0074 00000000 		.word	idx
 524 0078 00000000 		.word	pwm_instance
 525              		.cfi_endproc
 526              	.LFE236:
 528              		.section	.text.PWMStartDMA,"ax",%progbits
 529              		.align	1
 530              		.global	PWMStartDMA
 531              		.syntax unified
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 14


 532              		.thumb
 533              		.thumb_func
 535              	PWMStartDMA:
 536              	.LVL37:
 537              	.LFB241:
  85:bsp/pwm/bsp_pwm.c **** {
 538              		.loc 1 85 1 is_stmt 1 view -0
 539              		.cfi_startproc
 540              		@ args = 0, pretend = 0, frame = 0
 541              		@ frame_needed = 0, uses_anonymous_args = 0
  85:bsp/pwm/bsp_pwm.c **** {
 542              		.loc 1 85 1 is_stmt 0 view .LVU128
 543 0000 08B5     		push	{r3, lr}
 544              	.LCFI5:
 545              		.cfi_def_cfa_offset 8
 546              		.cfi_offset 3, -8
 547              		.cfi_offset 14, -4
  86:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start_DMA(pwm->htim, pwm->channel, pData, Size);
 548              		.loc 1 86 5 is_stmt 1 view .LVU129
 549 0002 93B2     		uxth	r3, r2
 550 0004 0A46     		mov	r2, r1
 551              	.LVL38:
  86:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start_DMA(pwm->htim, pwm->channel, pData, Size);
 552              		.loc 1 86 5 is_stmt 0 view .LVU130
 553 0006 4168     		ldr	r1, [r0, #4]
 554              	.LVL39:
  86:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start_DMA(pwm->htim, pwm->channel, pData, Size);
 555              		.loc 1 86 5 view .LVU131
 556 0008 0068     		ldr	r0, [r0]
 557              	.LVL40:
  86:bsp/pwm/bsp_pwm.c ****     HAL_TIM_PWM_Start_DMA(pwm->htim, pwm->channel, pData, Size);
 558              		.loc 1 86 5 view .LVU132
 559 000a FFF7FEFF 		bl	HAL_TIM_PWM_Start_DMA
 560              	.LVL41:
  87:bsp/pwm/bsp_pwm.c **** }
 561              		.loc 1 87 1 view .LVU133
 562 000e 08BD     		pop	{r3, pc}
 563              		.cfi_endproc
 564              	.LFE241:
 566              		.section	.bss.pwm_instance,"aw",%nobits
 567              		.align	2
 570              	pwm_instance:
 571 0000 00000000 		.space	64
 571      00000000 
 571      00000000 
 571      00000000 
 571      00000000 
 572              		.section	.bss.idx,"aw",%nobits
 575              	idx:
 576 0000 00       		.space	1
 577              		.text
 578              	.Letext0:
 579              		.file 2 "/opt/ST/STM32CubeCLT_1.19.0/GNU-tools-for-STM32/arm-none-eabi/include/machine/_default_ty
 580              		.file 3 "/opt/ST/STM32CubeCLT_1.19.0/GNU-tools-for-STM32/arm-none-eabi/include/sys/_stdint.h"
 581              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 582              		.file 5 "/opt/ST/STM32CubeCLT_1.19.0/GNU-tools-for-STM32/lib/gcc/arm-none-eabi/13.3.1/include/stdd
 583              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 15


 584              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 585              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 586              		.file 9 "bsp/pwm/bsp_pwm.h"
 587              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc.h"
 588              		.file 11 "/opt/ST/STM32CubeCLT_1.19.0/GNU-tools-for-STM32/arm-none-eabi/include/string.h"
 589              		.file 12 "/opt/ST/STM32CubeCLT_1.19.0/GNU-tools-for-STM32/arm-none-eabi/include/stdlib.h"
 590              		.file 13 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
ARM GAS  /var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s 			page 16


DEFINED SYMBOLS
                            *ABS*:00000000 bsp_pwm.c
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:21     .text.PWMSelectTclk:00000000 $t
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:26     .text.PWMSelectTclk:00000000 PWMSelectTclk
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:125    .text.PWMSelectTclk:0000006c $d
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:131    .text.HAL_TIM_PWM_PulseFinishedCallback:00000000 $t
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:137    .text.HAL_TIM_PWM_PulseFinishedCallback:00000000 HAL_TIM_PWM_PulseFinishedCallback
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:214    .text.HAL_TIM_PWM_PulseFinishedCallback:0000003c $d
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:575    .bss.idx:00000000 idx
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:570    .bss.pwm_instance:00000000 pwm_instance
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:220    .text.PWMStart:00000000 $t
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:226    .text.PWMStart:00000000 PWMStart
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:252    .text.PWMStop:00000000 $t
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:258    .text.PWMStop:00000000 PWMStop
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:284    .text.PWMSetPeriod:00000000 $t
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:290    .text.PWMSetPeriod:00000000 PWMSetPeriod
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:331    .text.PWMSetDutyRatio:00000000 $t
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:337    .text.PWMSetDutyRatio:00000000 PWMSetDutyRatio
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:401    .text.PWMRegister:00000000 $t
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:407    .text.PWMRegister:00000000 PWMRegister
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:523    .text.PWMRegister:00000074 $d
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:529    .text.PWMStartDMA:00000000 $t
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:535    .text.PWMStartDMA:00000000 PWMStartDMA
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:567    .bss.pwm_instance:00000000 $d
/var/folders/kr/_85zhnz53vldd5tqwnc25svm0000gn/T//ccD9xdlX.s:576    .bss.idx:00000000 $d

UNDEFINED SYMBOLS
HAL_RCC_GetPCLK1Freq
HAL_RCC_GetPCLK2Freq
APBPrescTable
HAL_TIM_PWM_Start
HAL_TIM_PWM_Stop
malloc
HAL_TIM_PWM_Start_DMA
